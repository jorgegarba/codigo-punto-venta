(this["webpackJsonppunto-venta-codigo5"]=this["webpackJsonppunto-venta-codigo5"]||[]).push([[0],{83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a(1),n=a(14),r=a.n(n),i=a(13),o=a(9),d=a(10),l=a(11),j=a.n(l),b=a(16),u="https://codigo4-pos.herokuapp.com",m=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/login"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/verificar"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(s.createContext)(),p=function(e){var t=e.children,a=Object(o.g)(),n=Object(s.useState)({autenticado:!1,usu_nom:null,usu_id:null,token:null,cargando:!0}),r=Object(d.a)(n,2),i=r[0],l=r[1];return Object(s.useEffect)((function(){!function(){var e=localStorage.getItem("token");e?h(e).then((function(t){if(console.log(t),t.ok){var a=e.split(".")[1],c=window.atob(a),s=JSON.parse(c);l({autenticado:!0,usu_nom:s.usu_nom,usu_id:s.usu_id,token:e,cargando:!1})}else localStorage.removeItem("token"),l({autenticado:!1,usu_nom:null,usu_id:null,token:null,cargando:!1})})):l({autenticado:!1,usu_nom:null,usu_id:null,token:null,cargando:!1})}()}),[]),Object(c.jsx)(O.Provider,{value:{autenticado:i.autenticado,usu_nom:i.usu_nom,usu_id:i.usu_id,token:i.token,cargando:i.cargando,iniciarSesionContext:function(e){localStorage.setItem("token",e);var t=e.split(".")[1],a=window.atob(t),c=JSON.parse(a);l({autenticado:!0,usu_nom:c.usu_nom,usu_id:c.usu_id,token:e,cargando:!1})},cerrarSesion:function(){localStorage.removeItem("token"),a.replace("/"),l({autenticado:!1,usu_nom:null,usu_id:null,token:null,cargando:!0})}},children:t})},x=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(c.jsxs)("a",{className:"navbar-brand",href:"#",children:[Object(c.jsx)("span",{className:"text-warning",children:"POS"})," Admin"]}),Object(c.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(c.jsxs)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item active",children:Object(c.jsxs)("a",{className:"nav-link",href:"#",children:["Home ",Object(c.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link",href:"#",children:"Link"})}),Object(c.jsxs)("li",{className:"nav-item dropdown",children:[Object(c.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"dropdownId","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Dropdown"}),Object(c.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownId",children:[Object(c.jsx)("a",{className:"dropdown-item",href:"#",children:"Action 1"}),Object(c.jsx)("a",{className:"dropdown-item",href:"#",children:"Action 2"})]})]})]}),Object(c.jsxs)("form",{className:"form-inline my-2 my-lg-0",children:[Object(c.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search"}),Object(c.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Search"})]})]})]})})},f=function(){return Object(c.jsx)("div",{children:"ADMIN DASHBOARD"})},v=a(6),_=a(50),N="https://codigo4-pos.herokuapp.com",g=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/pedido"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/pedido"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/pedido/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=e.history,a=Object(s.useState)({columns:[{label:"Id",field:"pedido_id"},{label:"Fecha",field:"pedido_fech"},{label:"Nro",field:"pedido_nro"},{label:"Estado",field:"pedido_est"},{label:"Usuario",field:"usuario_nombre"},{label:"Mesa",field:"numero_mesa"},{label:"Platos",field:"total_platos"},{label:"Acciones",field:"acciones"}],rows:[]}),n=Object(d.a)(a,2),r=n[0],i=n[1];return Object(s.useEffect)((function(){w().then((function(e){if(e.ok){var a=e.pedidos.map((function(e){var a,s,n;return{pedido_id:e.pedido_id,pedido_fech:e.pedido_fech,pedido_nro:e.pedido_nro,pedido_est:e.pedido_est,usuario_nombre:(null===(a=e.Usuario)||void 0===a?void 0:a.usu_nom)+" "+(null===(s=e.Usuario)||void 0===s?void 0:s.usu_ape),numero_mesa:null===(n=e.Mesa)||void 0===n?void 0:n.mesa_nro,total_platos:e.PedidoPlatos.reduce((function(e,t){return e+ +t.pedidoplato_cant}),0),acciones:Object(c.jsx)("button",{className:"btn btn-dark",onClick:function(){t.push("/admin/pedidos/".concat(e.pedido_id))},children:"Ver Pedido"})}}));i(Object(v.a)(Object(v.a)({},r),{},{rows:a}))}}))}),[]),Object(c.jsxs)("main",{className:"container mt-5",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("h1",{className:"display-4 text-center",children:"Lista de Pedidos"}),Object(c.jsx)("hr",{})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)(_.c,{data:r})})})})})]})},C=function(e){var t,a,n,r=Object(s.useState)({}),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useState)(!0),b=Object(d.a)(j,2),u=b[0],m=b[1];return Object(s.useEffect)((function(){y(e.match.params.pedido_id).then((function(e){e.ok&&l(e.pedido),m(!1)}))}),[]),Object(c.jsx)("main",{className:"container mt-5",children:u?Object(c.jsxs)("div",{className:"alert alert-primary text-center display-4",children:["Cargando... ",Object(c.jsx)("i",{className:"fas fa-spinner fa-spin"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("h4",{children:"Informaci\xf3n del Pedido"})})}),Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Pedido Id:"})," \xa0 ",o.pedido_id]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Usuario:"})," \xa0 ",(null===(t=o.Usuario)||void 0===t?void 0:t.usu_nom)+" "+(null===(a=o.Usuario)||void 0===a?void 0:a.usu_ape)]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Estado del Pedido:"})," \xa0","pagado"===o.pedido_est?Object(c.jsx)("span",{className:"badge badge-success",children:"Pagado"}):Object(c.jsx)("span",{className:"badge badge-secondary",children:o.pedido_est})]})]}),Object(c.jsxs)("div",{className:"col-md-6 text-right",children:[Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Fecha:"})," \xa0 ",o.pedido_fech]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"N\xfamero de mesa:"})," \xa0 ",null===(n=o.Mesa)||void 0===n?void 0:n.mesa_nro]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"N\xfamero de pedido:"})," \xa0",Object(c.jsxs)("span",{className:"display-4",children:[" # ",o.pedido_nro]})]})]})]})})})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table table-bordered table-hover table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"#"}),Object(c.jsx)("th",{children:"Cantidad"}),Object(c.jsx)("th",{children:"Descripci\xf3n"}),Object(c.jsx)("th",{children:"Foto"}),Object(c.jsx)("th",{children:"P. Unitario"}),Object(c.jsx)("th",{children:"P. Total"})]})}),Object(c.jsx)("tbody",{children:o.PedidoPlatos.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t}),Object(c.jsx)("td",{children:e.pedidoplato_cant}),Object(c.jsx)("td",{children:e.Plato.plato_nom}),Object(c.jsx)("td",{children:Object(c.jsx)("img",{src:e.Plato.plato_img,alt:"",width:"120"})}),Object(c.jsxs)("td",{children:["S/ ",e.Plato.plato_pre]}),Object(c.jsxs)("td",{children:["S/ ",+e.Plato.plato_pre*+e.pedidoplato_cant]})]},e.pedidoplato_id)}))})]})})})})})})]})})},P=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(x,{}),Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/admin/dashboard",component:f}),Object(c.jsx)(o.b,{path:"/admin/pedidos/:pedido_id",component:C}),Object(c.jsx)(o.b,{path:"/admin/pedidos",component:S})]})]})},k=a(25),A=function(e){var t=Object(s.useContext)(O).iniciarSesionContext,a=Object(s.useState)({correo:"",password:""}),n=Object(d.a)(a,2),r=n[0],i=n[1],o=function(e){i(Object(v.a)(Object(v.a)({},r),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("main",{className:"container-fluid bg-dark login-screen",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(a){a.preventDefault(),m(r).then((function(a){console.log(a),a.ok&&(t(a.token),e.history.push("/pos/pedido"))}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"",children:"Usuario"}),Object(c.jsx)("input",{type:"text",placeholder:"Ejm: jgarnica@mail.com",className:"form-control",id:"correo",name:"correo",onChange:o,value:r.correo})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"",children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control",onChange:o,value:r.password})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Iniciar Sesi\xf3n"})})]})})})})})})},I=function(){return Object(c.jsx)("div",{children:"AuthRegisterScreen"})},D=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/auth/login",component:A}),Object(c.jsx)(o.b,{path:"/auth/register",component:I})]})})},E=Object(s.createContext)(),M=function(e,t){return"SELECCIONAR_CATEGORIA"===t.type?Object(v.a)(Object(v.a)({},e),{},{categoria_global:t.data}):"SELECCIONAR_MESA"===t.type?Object(v.a)(Object(v.a)({},e),{},{mesa_global:t.data}):"ACTUALIZAR_PEDIDOS"===t.type?Object(v.a)(Object(v.a)({},e),{},{pedidos:t.data}):"MODAL_BOLETA"===t.type?Object(v.a)(Object(v.a)({},e),{},{modal_boleta:t.data}):Object(v.a)({},e)},T=function(e){var t=e.children,a=Object(s.useReducer)(M,{categoria_global:null,mesa_global:null,pedidos:[],modal_boleta:!1}),n=Object(d.a)(a,2),r=n[0],i=n[1];return Object(c.jsx)(E.Provider,{value:{mesa_global:r.mesa_global,categoria_global:r.categoria_global,pedidos:r.pedidos,modal_boleta:r.modal_boleta,setModalBoleta:function(e){i({type:"MODAL_BOLETA",data:e})},borrarPedido:function(){var e=r.mesa_global,t=r.pedidos;t=t.filter((function(t){return t.objMesa.mesa_id!==e.mesa_id})),i({type:"ACTUALIZAR_PEDIDOS",data:t})},restarPlatoAPedido:function(e){var t=r.pedidos,a=r.mesa_global;if(a){var c=t.find((function(e){return e.objMesa.mesa_id===a.mesa_id}));if(c){var s=c.platos.find((function(t){return t.plato_id===e.plato_id}));s&&(s.cantidad-=1,0===s.cantidad&&(c.platos=c.platos.filter((function(t){return t.plato_id!==e.plato_id})),0===c.platos.length&&(t=t.filter((function(e){return e.objMesa.mesa_id!==a.mesa_id})))),i({type:"ACTUALIZAR_PEDIDOS",data:t}))}}},seleccionarCategoriaGlobal:function(e){i({data:e,type:"SELECCIONAR_CATEGORIA"})},seleccionarMesaGlobal:function(e){i({data:e,type:"SELECCIONAR_MESA"})},incrementarPlatoAPedido:function(e){var t=r.pedidos,a=r.mesa_global;if(a){var c=t.find((function(e){return e.objMesa.mesa_id===a.mesa_id}));if(c){var s=c.platos.find((function(t){return t.plato_id===e.plato_id}));s?(s.cantidad+=1,i({type:"ACTUALIZAR_PEDIDOS",data:t})):(c.platos.push(Object(v.a)(Object(v.a)({},e),{},{cantidad:1})),i({type:"ACTUALIZAR_PEDIDOS",data:t}))}else t.push({estado:"pendiente",objMesa:Object(v.a)({},a),platos:[Object(v.a)(Object(v.a)({},e),{},{cantidad:1})]}),i({type:"ACTUALIZAR_PEDIDOS",data:t})}}},children:t})},L=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/categoria"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/categoria/").concat(t,"/platos"));case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=a.p+"static/media/plato_blanco.6334c308.svg",B=function(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(!0),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useContext)(E),b=j.seleccionarCategoriaGlobal,u=j.categoria_global;return Object(s.useEffect)((function(){L().then((function(e){e.ok&&(n(e.content),l(!1))}))}),[]),Object(c.jsx)("nav",{className:"menu",children:Object(c.jsx)("ul",{className:"menu__lista",children:o?Object(c.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})}):a.map((function(e){return Object(c.jsxs)("li",{style:{textAlign:"center"},className:e.categoria_id===(null===u||void 0===u?void 0:u.categoria_id)?"active":"",onClick:function(){b(e)},children:[Object(c.jsx)("img",{src:U,alt:""}),Object(c.jsx)("span",{children:e.categoria_nom})]},e.categoria_id)}))})})},F=function(e){var t=e.objPlato;return Object(c.jsxs)("li",{className:"comanda__item",children:[Object(c.jsxs)("p",{className:"comanda__nombre",children:[Object(c.jsx)("span",{children:Object(c.jsx)("strong",{children:t.plato_nom})}),Object(c.jsxs)("span",{children:["Precio: S/ ",t.plato_pre]})]}),Object(c.jsx)("p",{className:"comanda__cantidad",children:t.cantidad}),Object(c.jsx)("p",{className:"comanda__precio",children:Object(c.jsxs)("strong",{children:["S/ ",+t.cantidad*+t.plato_pre]})})]})},G=a(47),J=a.n(G),$=a(92),H=a(33),Z=a.n(H),V=a(91),Y=a(48),z=a.n(Y),q=function(){var e=Object(s.useRef)(),t=Object(s.useContext)(E),a=t.modal_boleta,n=t.setModalBoleta,r=t.borrarPedido;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(V.a,{show:a,onHide:function(){n(!1),r()},size:"xl",children:[Object(c.jsx)(V.a.Header,{closeButton:!0,children:Object(c.jsx)(V.a.Title,{children:"Modal heading"})}),Object(c.jsx)(V.a.Body,{children:Object(c.jsxs)("div",{className:"container",ref:e,children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{className:"card-body p-0",children:[Object(c.jsxs)("div",{className:"row p-5",children:[Object(c.jsx)("div",{className:"col-xl-6",children:Object(c.jsx)("img",{src:"http://via.placeholder.com/400x90?text=logo"})}),Object(c.jsxs)("div",{className:"col-xl-6 text-right",children:[Object(c.jsx)("p",{className:"font-weight-bold mb-1",children:"Invoice #550"}),Object(c.jsx)("p",{className:"text-muted",children:"Due to: 4 Dec, 2019"})]})]}),Object(c.jsx)("hr",{className:"my-5"}),Object(c.jsxs)("div",{className:"row pb-5 p-5",children:[Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("p",{className:"font-weight-bold mb-4",children:"Client Information"}),Object(c.jsx)("p",{className:"mb-1",children:"John Doe, Mrs Emma Downson"}),Object(c.jsx)("p",{children:"Acme Inc"}),Object(c.jsx)("p",{className:"mb-1",children:"Berlin, Germany"}),Object(c.jsx)("p",{className:"mb-1",children:"6781 45P"})]}),Object(c.jsxs)("div",{className:"col-md-6 text-right",children:[Object(c.jsx)("p",{className:"font-weight-bold mb-4",children:"Payment Details"}),Object(c.jsxs)("p",{className:"mb-1",children:[Object(c.jsx)("span",{className:"text-muted",children:"VAT: "})," 1425782"]}),Object(c.jsxs)("p",{className:"mb-1",children:[Object(c.jsx)("span",{className:"text-muted",children:"VAT ID: "})," 10253642"]}),Object(c.jsxs)("p",{className:"mb-1",children:[Object(c.jsx)("span",{className:"text-muted",children:"Payment Type: "})," Root"]}),Object(c.jsxs)("p",{className:"mb-1",children:[Object(c.jsx)("span",{className:"text-muted",children:"Name: "})," John Doe"]})]})]}),Object(c.jsx)("div",{className:"row p-5",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{className:"border-0 text-uppercase small font-weight-bold",children:"ID"}),Object(c.jsx)("th",{className:"border-0 text-uppercase small font-weight-bold",children:"Item"}),Object(c.jsx)("th",{className:"border-0 text-uppercase small font-weight-bold",children:"Description"}),Object(c.jsx)("th",{className:"border-0 text-uppercase small font-weight-bold",children:"Quantity"}),Object(c.jsx)("th",{className:"border-0 text-uppercase small font-weight-bold",children:"Unit Cost"}),Object(c.jsx)("th",{className:"border-0 text-uppercase small font-weight-bold",children:"Total"})]})}),Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"1"}),Object(c.jsx)("td",{children:"Software"}),Object(c.jsx)("td",{children:"LTS Versions"}),Object(c.jsx)("td",{children:"21"}),Object(c.jsx)("td",{children:"$321"}),Object(c.jsx)("td",{children:"$3452"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"1"}),Object(c.jsx)("td",{children:"Software"}),Object(c.jsx)("td",{children:"Support"}),Object(c.jsx)("td",{children:"234"}),Object(c.jsx)("td",{children:"$6356"}),Object(c.jsx)("td",{children:"$23423"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"1"}),Object(c.jsx)("td",{children:"Software"}),Object(c.jsx)("td",{children:"Sofware Collection"}),Object(c.jsx)("td",{children:"4534"}),Object(c.jsx)("td",{children:"$354"}),Object(c.jsx)("td",{children:"$23434"})]})]})]})})}),Object(c.jsxs)("div",{className:"d-flex flex-row-reverse bg-dark text-white p-4",children:[Object(c.jsxs)("div",{className:"py-3 px-5 text-right",children:[Object(c.jsx)("div",{className:"mb-2",children:"Grand Total"}),Object(c.jsx)("div",{className:"h2 font-weight-light",children:"$234,234"})]}),Object(c.jsxs)("div",{className:"py-3 px-5 text-right",children:[Object(c.jsx)("div",{className:"mb-2",children:"Discount"}),Object(c.jsx)("div",{className:"h2 font-weight-light",children:"10%"})]}),Object(c.jsxs)("div",{className:"py-3 px-5 text-right",children:[Object(c.jsx)("div",{className:"mb-2",children:"Sub - Total amount"}),Object(c.jsx)("div",{className:"h2 font-weight-light",children:"$32,432"})]})]})]})})})}),Object(c.jsxs)("div",{className:"text-light mt-5 mb-5 text-center small",children:["by : ",Object(c.jsx)("a",{className:"text-light",target:"_blank",href:"http://totoprayogo.com",children:"totoprayogo.com"})]})]})}),Object(c.jsxs)(V.a.Footer,{children:[Object(c.jsx)(z.a,{trigger:function(){return Object(c.jsxs)("button",{className:"btn btn-dark",children:[Object(c.jsx)("i",{className:"fas fa-print"})," Imprimir!"]})},content:function(){return e.current}}),Object(c.jsx)("button",{classNameName:"btn btn-danger",onClick:function(){console.log(e.current)},children:"Cerrar"})]})]})})},Q=function(){var e=Object(s.useContext)(E),t=e.pedidos,a=e.mesa_global,n=(e.borrarPedido,e.setModalBoleta),r=null;a&&(r=t.find((function(e){return e.objMesa.mesa_id===a.mesa_id})));return Object(c.jsxs)("div",{className:"comanda",children:[Object(c.jsx)("h4",{className:"comanda__mesa",children:a?"Mesa ".concat(a.mesa_nro):"Sin mesa seleccionada"}),Object(c.jsx)("p",{className:"comanda__usuario",children:"Carlos Jimenez"}),Object(c.jsx)("hr",{}),a?r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ul",{className:"comanda__lista",children:r.platos.map((function(e){return Object(c.jsx)(F,{objPlato:e},e.plato_id)}))}),Object(c.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){Z.a.fire({title:"\xbfPagar el pedido?",text:"Confirme que est\xe1 cancelando el total del pedido",icon:"warning",showCancelButton:!0}).then((function(e){if(e.isConfirmed){var c=t.find((function(e){return e.objMesa.mesa_id===a.mesa_id})).platos.map((function(e){return{plato_id:e.plato_id,pedidoplato_cant:e.cantidad}})),s={pedido_fech:J()().format("YYYY-MM-DD HH:mm:ss"),pedido_nro:Object($.a)(),pedido_est:"pagado",usu_id:2,mesa_id:a.mesa_id,pedidoplatos:c};g(s).then((function(e){e.ok&&(Z.a.fire({title:"Hecho!",text:"Pedido registrado en la base de datos",icon:"success",timer:700,position:"top-right"}),n(!0))}))}}))},children:"PAGAR"})]}):Object(c.jsxs)("div",{children:["No hay pedidos en la mesa ",a.mesa_nro," \ud83d\ude25"]}):Object(c.jsx)("div",{children:"Seleccione una mesa"}),Object(c.jsx)(q,{})]})},K=a.p+"static/media/logo.a9757059.svg",W=a.p+"static/media/search.c031f9ef.svg",X=function(){var e=Object(s.useContext)(O),t=e.usu_nom,a=e.cerrarSesion;return Object(c.jsxs)("header",{className:"header",children:[Object(c.jsx)("div",{className:"header__logo",children:Object(c.jsx)("img",{src:K,alt:""})}),Object(c.jsxs)("div",{className:"header__buscador",children:[Object(c.jsx)("img",{src:W,alt:""}),Object(c.jsx)("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(c.jsxs)("div",{className:"header__usuario mr-4",children:[Object(c.jsx)(i.b,{className:"btn btn-success mr-2",to:"/admin/dashboard",children:"Ir a admin"}),Object(c.jsxs)("button",{className:"btn btn-danger mr-2",onClick:function(){a()},children:[Object(c.jsx)("i",{class:"fas fa-door-open"}),"Salir"]}),Object(c.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(c.jsx)("span",{children:t})]})]})},ee=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/mesa"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(!0),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useContext)(E),b=j.seleccionarMesaGlobal,u=j.mesa_global;return Object(s.useEffect)((function(){ee().then((function(e){e.ok&&n(e.content),l(!1)}))}),[]),Object(c.jsxs)("div",{className:"mesas",children:[Object(c.jsx)("ul",{className:"mesas__lista",children:o?Object(c.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})}):a.map((function(e){return Object(c.jsxs)("li",{className:e.mesa_id===(null===u||void 0===u?void 0:u.mesa_id)?"mesas__mesa activo":"",onClick:function(){b(e)},children:[Object(c.jsx)("span",{className:"mesas__titulo",children:"Mesa"}),Object(c.jsx)("span",{className:"mesas__numero",children:e.mesa_nro})]},e.mesa_id)}))}),Object(c.jsx)("div",{className:"mesas__info"})]})},ae=function(e){var t=e.objPlato,a=Object(s.useContext)(E),n=a.incrementarPlatoAPedido,r=a.restarPlatoAPedido;return Object(c.jsxs)("div",{className:"carta__plato",children:[Object(c.jsx)("img",{src:t.plato_img,alt:""}),Object(c.jsx)("h4",{className:"carta__titulo",children:t.plato_nom}),Object(c.jsxs)("span",{className:"carta__precio",children:["S/ ",t.plato_pre]}),Object(c.jsxs)("div",{className:"carta__botones",children:[Object(c.jsx)("button",{className:"boton boton-outline-primary boton-restar",onClick:function(){r(t)},children:"-1"}),Object(c.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){n(t)},children:"+1"})]})]})},ce=function(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(!0),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useContext)(E).categoria_global;return Object(s.useEffect)((function(){l(!0),j&&R(j.categoria_id).then((function(e){e.ok&&(n(e.content.Platos),l(!1))}))}),[j]),Object(c.jsx)("div",{className:"carta__platos",children:j?o?Object(c.jsx)("div",{className:"text-light",children:"Cargando"}):a.map((function(e){return Object(c.jsx)(ae,{objPlato:e},e.plato_id)})):Object(c.jsx)("h4",{className:"text-light",children:"Ninguna categor\xeda ha sido seleccionada"})})},se=function(){var e=Object(s.useContext)(E),t=e.categoria_global,a=e.mesa_global;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(X,{}),Object(c.jsxs)("main",{className:"pos-container",children:[Object(c.jsx)(B,{}),Object(c.jsxs)("section",{className:"tabla",children:[Object(c.jsx)(te,{}),Object(c.jsxs)("div",{className:"pedido",children:[Object(c.jsxs)("div",{className:"carta",children:[Object(c.jsxs)("h3",{children:["Lista de Platos Categoria: \xa0",Object(c.jsx)("span",{className:"color-secundario",children:(null===t||void 0===t?void 0:t.categoria_nom)||"Seleccione"})]}),Object(c.jsx)(ce,{})]}),Object(c.jsxs)("div",{className:"boleta",children:[Object(c.jsxs)("h3",{children:["Pedido Mesa: \xa0",Object(c.jsx)("span",{className:"color-secundario",children:(null===a||void 0===a?void 0:a.mesa_nro)||"Seleccione"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)(Q,{})]})]})]})]})]})},ne=function(){return Object(c.jsx)(T,{children:Object(c.jsx)(o.d,{children:Object(c.jsx)(o.b,{path:"/pos/pedido",component:se})})})},re=function(e){var t=e.path,a=e.component,n=Object(s.useContext)(O),r=n.autenticado;return n.cargando?Object(c.jsx)("div",{children:"Cargando..."}):r?Object(c.jsx)(o.b,{path:t,component:a}):Object(c.jsx)(o.a,{to:"/auth/login"})},ie=function(){return Object(c.jsx)(i.a,{children:Object(c.jsx)(p,{children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/auth",component:D}),Object(c.jsx)(re,{path:"/pos",component:ne}),Object(c.jsx)(re,{path:"/admin",component:P}),Object(c.jsx)(o.a,{to:"/auth/login"})]})})})};a(82),a(83);r.a.render(Object(c.jsx)(ie,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.5d5d259a.chunk.js.map